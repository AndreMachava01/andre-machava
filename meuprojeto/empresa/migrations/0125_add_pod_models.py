# Generated by Django 5.2.6 on 2025-10-21 09:30

import django.db.models.deletion
import django.utils.timezone
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('empresa', '0124_add_exception_models'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ConfiguracaoPOD',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True)),
                ('descricao', models.TextField(blank=True)),
                ('obrigatorio_gps', models.BooleanField(default=True)),
                ('precisao_gps_minima', models.DecimalField(decimal_places=2, default=Decimal('50.00'), help_text='Precisão mínima do GPS em metros', max_digits=8)),
                ('obrigatorio_foto', models.BooleanField(default=True)),
                ('obrigatorio_assinatura', models.BooleanField(default=True)),
                ('tamanho_maximo_mb', models.PositiveIntegerField(default=10)),
                ('formatos_permitidos', models.JSONField(default=list, help_text="Lista de formatos permitidos: ['PDF', 'JPG', 'PNG']")),
                ('template_guia', models.CharField(default='guia_padrao.html', max_length=100)),
                ('incluir_codigo_barras', models.BooleanField(default=True)),
                ('incluir_qr_code', models.BooleanField(default=True)),
                ('template_etiqueta', models.CharField(default='etiqueta_padrao.html', max_length=100)),
                ('dimensoes_etiqueta', models.JSONField(default=dict, help_text="Ex: {'largura': 100, 'altura': 60}")),
                ('ativo', models.BooleanField(default=True)),
                ('padrao', models.BooleanField(default=False)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_atualizacao', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Configuração POD',
                'verbose_name_plural': 'Configurações POD',
                'ordering': ['-padrao', 'nome'],
            },
        ),
        migrations.CreateModel(
            name='TipoDocumento',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('nome', models.CharField(max_length=100)),
                ('descricao', models.TextField(blank=True)),
                ('obrigatorio', models.BooleanField(default=True)),
                ('permite_multiplos', models.BooleanField(default=False)),
                ('formato_arquivo', models.CharField(choices=[('PDF', 'PDF'), ('JPG', 'JPG'), ('PNG', 'PNG'), ('DOC', 'DOC'), ('DOCX', 'DOCX')], default='PDF', max_length=10)),
                ('tamanho_maximo_mb', models.PositiveIntegerField(default=10)),
                ('dimensoes_minimas', models.CharField(blank=True, help_text='Ex: 800x600', max_length=20)),
                ('ativo', models.BooleanField(default=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_atualizacao', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Tipo de Documento',
                'verbose_name_plural': 'Tipos de Documento',
                'ordering': ['nome'],
            },
        ),
        migrations.CreateModel(
            name='GuiaRemessa',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('numero_sequencial', models.PositiveIntegerField(unique=True)),
                ('data_emissao', models.DateTimeField(default=django.utils.timezone.now)),
                ('data_prevista_entrega', models.DateField()),
                ('nome_remetente', models.CharField(max_length=100)),
                ('endereco_remetente', models.TextField()),
                ('telefone_remetente', models.CharField(blank=True, max_length=20)),
                ('nome_destinatario', models.CharField(max_length=100)),
                ('endereco_destinatario', models.TextField()),
                ('telefone_destinatario', models.CharField(blank=True, max_length=20)),
                ('descricao_produto', models.TextField()),
                ('peso', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('valor_declarado', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('instrucoes_especiais', models.TextField(blank=True)),
                ('observacoes', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('GERADA', 'Gerada'), ('IMPRESSA', 'Impressa'), ('ENVIADA', 'Enviada'), ('ENTREGUE', 'Entregue'), ('CANCELADA', 'Cancelada')], default='GERADA', max_length=20)),
                ('impressa', models.BooleanField(default=False)),
                ('data_impressao', models.DateTimeField(blank=True, null=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_atualizacao', models.DateTimeField(auto_now=True)),
                ('impressa_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='guias_impressas', to=settings.AUTH_USER_MODEL)),
                ('rastreamento_entrega', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='guias_remessa', to='empresa.rastreamentoentrega')),
            ],
            options={
                'verbose_name': 'Guia de Remessa',
                'verbose_name_plural': 'Guias de Remessa',
                'ordering': ['-data_emissao'],
            },
        ),
        migrations.CreateModel(
            name='Etiqueta',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('codigo_barras', models.CharField(blank=True, max_length=50, unique=True)),
                ('codigo_qr', models.CharField(blank=True, max_length=100, unique=True)),
                ('tipo', models.CharField(choices=[('PRODUTO', 'Etiqueta de Produto'), ('ENVIO', 'Etiqueta de Envio'), ('RASTREAMENTO', 'Etiqueta de Rastreamento'), ('ESPECIAL', 'Etiqueta Especial')], max_length=20)),
                ('conteudo', models.JSONField(help_text='Conteúdo da etiqueta em formato JSON')),
                ('largura_mm', models.PositiveIntegerField(default=100)),
                ('altura_mm', models.PositiveIntegerField(default=60)),
                ('impressa', models.BooleanField(default=False)),
                ('data_impressao', models.DateTimeField(blank=True, null=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('impressa_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='etiquetas_impressas', to=settings.AUTH_USER_MODEL)),
                ('rastreamento_entrega', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='etiquetas', to='empresa.rastreamentoentrega')),
                ('guia_remessa', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='etiquetas', to='empresa.guiaremessa')),
            ],
            options={
                'verbose_name': 'Etiqueta',
                'verbose_name_plural': 'Etiquetas',
                'ordering': ['-data_criacao'],
            },
        ),
        migrations.CreateModel(
            name='ProvaEntrega',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(max_length=20, unique=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('tipo_entrega', models.CharField(choices=[('COMPLETA', 'Entrega Completa'), ('PARCIAL', 'Entrega Parcial'), ('RECUSADA', 'Entrega Recusada'), ('DEVOLVIDA', 'Devolvida')], default='COMPLETA', max_length=20)),
                ('data_entrega', models.DateTimeField(default=django.utils.timezone.now)),
                ('endereco_entrega', models.CharField(max_length=255)),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('precisao_gps', models.DecimalField(blank=True, decimal_places=2, help_text='Precisão em metros', max_digits=8, null=True)),
                ('nome_destinatario', models.CharField(max_length=100)),
                ('documento_destinatario', models.CharField(blank=True, max_length=20)),
                ('telefone_destinatario', models.CharField(blank=True, max_length=20)),
                ('parentesco_destinatario', models.CharField(blank=True, help_text='Ex: Filho, Pai, Vizinho', max_length=50)),
                ('observacoes', models.TextField(blank=True)),
                ('motivo_recusa', models.TextField(blank=True, help_text='Se entrega foi recusada')),
                ('status', models.CharField(choices=[('PENDENTE', 'Pendente'), ('EM_ANDAMENTO', 'Em Andamento'), ('CONCLUIDA', 'Concluída'), ('REJEITADA', 'Rejeitada'), ('CANCELADA', 'Cancelada')], default='PENDENTE', max_length=20)),
                ('validada', models.BooleanField(default=False)),
                ('data_validacao', models.DateTimeField(blank=True, null=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_atualizacao', models.DateTimeField(auto_now=True)),
                ('entregue_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='entregas_realizadas', to=settings.AUTH_USER_MODEL)),
                ('rastreamento_entrega', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='provas_entrega', to='empresa.rastreamentoentrega')),
                ('validada_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='provas_validadas', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Prova de Entrega',
                'verbose_name_plural': 'Provas de Entrega',
                'ordering': ['-data_entrega'],
            },
        ),
        migrations.CreateModel(
            name='AssinaturaDigital',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('dados_assinatura', models.JSONField(help_text='Dados da assinatura em formato JSON')),
                ('imagem_assinatura', models.ImageField(blank=True, null=True, upload_to='pod/assinaturas/%Y/%m/%d/')),
                ('dispositivo', models.CharField(blank=True, max_length=100)),
                ('navegador', models.CharField(blank=True, max_length=100)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('hash_validacao', models.CharField(blank=True, help_text='Hash para validação de integridade', max_length=64)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('prova_entrega', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='assinatura', to='empresa.provaentrega')),
            ],
            options={
                'verbose_name': 'Assinatura Digital',
                'verbose_name_plural': 'Assinaturas Digitais',
            },
        ),
        migrations.CreateModel(
            name='DocumentoPOD',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(choices=[('ASSINATURA', 'Assinatura'), ('FOTO_ENTREGA', 'Foto da Entrega'), ('FOTO_PRODUTO', 'Foto do Produto'), ('FOTO_DESTINATARIO', 'Foto do Destinatário'), ('COMPROVANTE', 'Comprovante'), ('NOTA_FISCAL', 'Nota Fiscal'), ('OUTROS', 'Outros')], max_length=20)),
                ('nome_arquivo', models.CharField(max_length=255)),
                ('arquivo', models.FileField(upload_to='pod/documentos/%Y/%m/%d/')),
                ('tamanho_arquivo', models.PositiveIntegerField(help_text='Tamanho em bytes')),
                ('descricao', models.TextField(blank=True)),
                ('observacoes', models.TextField(blank=True)),
                ('validado', models.BooleanField(default=False)),
                ('data_validacao', models.DateTimeField(blank=True, null=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('validado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('prova_entrega', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documentos', to='empresa.provaentrega')),
                ('tipo_documento', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='empresa.tipodocumento')),
            ],
            options={
                'verbose_name': 'Documento POD',
                'verbose_name_plural': 'Documentos POD',
                'ordering': ['-data_criacao'],
            },
        ),
    ]
