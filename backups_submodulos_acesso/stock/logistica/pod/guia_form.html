{% extends 'base_admin.html' %}
{% load static %}

{% block title %}{% if form.instance.pk %}Editar{% else %}Nova{% endif %} Guia de Remessa{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb -->
    <nav class="breadcrumb-modern">
        <a href="/dashboard/">
            <i class="fas fa-home"></i>
            Dashboard
        </a>
        <i class="fas fa-chevron-right"></i>
        <a href="/stock/">
            <i class="fas fa-warehouse"></i>
            Stock
        </a>
        <i class="fas fa-chevron-right"></i>
        <a href="/stock/logistica/">
            <i class="fas fa-truck"></i>
            Logística
        </a>
        <i class="fas fa-chevron-right"></i>
        <a href="{% url 'stock:pod:dashboard' %}">POD & Documentos</a>
        <i class="fas fa-chevron-right"></i>
        <a href="">Guias de Remessa</a>
        <i class="fas fa-chevron-right"></i>
        <span>{% if form.instance.pk %}Editar{% else %}Nova{% endif %} Guia</span>
    </nav>

    <!-- Page Header -->
    <div class="page-header">
        <div class="page-header-content">
            <div>
                <h1 class="page-title">
                    <i class="fas fa-plus-circle"></i>
                    {% if form.instance.pk %}Editar Guia de Remessa{% else %}Nova Guia de Remessa{% endif %}
                </h1>
                <p class="page-subtitle">
                    {% if form.instance.pk %}Atualize os detalhes da guia de remessa existente.{% else %}Crie uma nova guia de remessa para suas operações logísticas.{% endif %}
                </p>
            </div>
            <div class="header-actions">
                <a href="#" class="btn btn btn-secondary btn-responsive -responsive">
                    <i class="fas fa-arrow-left"></i>
                    Voltar às Guias
                </a>
            </div>
        </div>
    </div>

    <!-- Messages -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                <i class="fas fa-{% if message.tags == 'error' %}exclamation-triangle{% elif message.tags == 'success' %}check-circle{% else %}info-circle{% endif %}"></i>
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">
                <i class="fas fa-clipboard-list"></i>
                Dados da Guia de Remessa
            </h3>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data"action="."method="post">{% csrf_token %}
                {% csrf_token %}

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.rastreamento_entrega.id_for_label }}" class="form-label">
                                <i class="fas fa-route"></i> Rastreamento Associado
                            </label>
                            {{ form.rastreamento_entrega }}
                            {% if form.rastreamento_entrega.errors %}
                                <div class="text-danger small mt-1">{{ form.rastreamento_entrega.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Selecione o rastreamento ao qual esta guia se refere.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.codigo.id_for_label }}" class="form-label">
                                <i class="fas fa-barcode"></i> Código da Guia
                            </label>
                            {{ form.codigo }}
                            {% if form.codigo.errors %}
                                <div class="text-danger small mt-1">{{ form.codigo.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Código único para identificar esta guia de remessa.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.data_prevista_entrega.id_for_label }}" class="form-label">
                                <i class="fas fa-calendar-alt"></i> Data Prevista de Entrega
                            </label>
                            {{ form.data_prevista_entrega }}
                            {% if form.data_prevista_entrega.errors %}
                                <div class="text-danger small mt-1">{{ form.data_prevista_entrega.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Data prevista para a entrega da mercadoria.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.nome_destinatario.id_for_label }}" class="form-label">
                                <i class="fas fa-user"></i> Nome do Destinatário
                            </label>
                            {{ form.nome_destinatario }}
                            {% if form.nome_destinatario.errors %}
                                <div class="text-danger small mt-1">{{ form.nome_destinatario.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Nome completo do destinatário da mercadoria.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.endereco_entrega.id_for_label }}" class="form-label">
                                <i class="fas fa-map-marker-alt"></i> Endereço de Entrega
                            </label>
                            {{ form.endereco_entrega }}
                            {% if form.endereco_entrega.errors %}
                                <div class="text-danger small mt-1">{{ form.endereco_entrega.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Endereço completo onde a mercadoria será entregue.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.contacto_destinatario.id_for_label }}" class="form-label">
                                <i class="fas fa-phone"></i> Contacto do Destinatário
                            </label>
                            {{ form.contacto_destinatario }}
                            {% if form.contacto_destinatario.errors %}
                                <div class="text-danger small mt-1">{{ form.contacto_destinatario.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Número de telefone do destinatário.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.nome_remetente.id_for_label }}" class="form-label">
                                <i class="fas fa-user-tie"></i> Nome do Remetente
                            </label>
                            {{ form.nome_remetente }}
                            {% if form.nome_remetente.errors %}
                                <div class="text-danger small mt-1">{{ form.nome_remetente.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Nome da empresa ou pessoa que está enviando.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.endereco_remetente.id_for_label }}" class="form-label">
                                <i class="fas fa-building"></i> Endereço do Remetente
                            </label>
                            {{ form.endereco_remetente }}
                            {% if form.endereco_remetente.errors %}
                                <div class="text-danger small mt-1">{{ form.endereco_remetente.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Endereço de onde a mercadoria está sendo enviada.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.descricao_produto.id_for_label }}" class="form-label">
                                <i class="fas fa-box"></i> Descrição do Produto
                            </label>
                            {{ form.descricao_produto }}
                            {% if form.descricao_produto.errors %}
                                <div class="text-danger small mt-1">{{ form.descricao_produto.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Descrição detalhada da mercadoria sendo enviada.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.peso.id_for_label }}" class="form-label">
                                <i class="fas fa-weight-hanging"></i> Peso (kg)
                            </label>
                            {{ form.peso }}
                            {% if form.peso.errors %}
                                <div class="text-danger small mt-1">{{ form.peso.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Peso|default:0 total da mercadoria em quilogramas.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.valor_declarado.id_for_label }}" class="form-label">
                                <i class="fas fa-dollar-sign"></i> Valor Declarado
                            </label>
                            {{ form.valor_declarado }}
                            {% if form.valor_declarado.errors %}
                                <div class="text-danger small mt-1">{{ form.valor_declarado.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Valor declarado da mercadoria para seguro.
                            </small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group mb-3">
                            <label for="{{ form.instrucoes_especiais.id_for_label }}" class="form-label">
                                <i class="fas fa-exclamation-triangle"></i> Instruções Especiais
                            </label>
                            {{ form.instrucoes_especiais }}
                            {% if form.instrucoes_especiais.errors %}
                                <div class="text-danger small mt-1">{{ form.instrucoes_especiais.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Instruções especiais para o transporte e entrega.
                            </small>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="form-group mb-3">
                            <label for="{{ form.observacoes.id_for_label }}" class="form-label">
                                <i class="fas fa-comment-alt"></i> Observações
                            </label>
                            {{ form.observacoes }}
                            {% if form.observacoes.errors %}
                                <div class="text-danger small mt-1">{{ form.observacoes.errors }}</div>
                            {% endif %}
                            <small class="form-text text-muted">
                                Quaisquer observações adicionais sobre a guia de remessa.
                            </small>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary" class="btn btn btn-primary btn-responsive -responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação">
                        <i class="fas fa-save"></i> Salvar Guia de Remessa
                    </button>
                    <a href="#"stock:pod:guias_list' %}" class="btn btn btn-secondary btn-responsive -responsive">
                        <i class="fas fa-times"></i> Cancelar
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}