{% extends 'base_admin.html' %}
{% load static %}

{% block title %}Canhoto de Sal√°rio - {{ funcionario_folha.funcionario.nome_completo }}{% endblock %}

{% block extra_style %}
<style>
    /* Estilos espec√≠ficos do m√≥dulo - apenas gradiente no header */
    .page-header,
    .hero-section,
    .dashboard-header,
    .nav-top {
        background: var(--purple-gradient);
    }

    /* Bot√µes de A√ß√£o Padronizados */
    .action-buttons {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        padding: 10px;
        background: #f0fdf4;
        border-radius: 8px;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        flex-wrap: wrap;
    }

    .btn {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 8px 12px;
        border: none;
        border-radius: 5px;
        font-size: 12px;
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
    }

    .btn-primary {
        background: #10b981;
        color: white;
    }

    .btn-primary:hover {
        background: #059669;
        transform: translateY(-1px);
    }

    .btn-secondary {
        background: #6b7280;
        color: white;
    }

    .btn-secondary:hover {
        background: #4b5563;
        transform: translateY(-1px);
    }

    .btn-outline {
        background: transparent;
        color: #6b7280;
        border: 1px solid #6b7280;
    }

    .btn-outline:hover {
        background: #6b7280;
        color: white;
        transform: translateY(-1px);
    }

    @media print {
        .action-buttons {
            display: none !important;
        }
        
        .canhoto-container {
            max-width: 100%;
            margin: 0;
            padding: 5px;
            background: white;
        }
        
        .canhoto-header {
            padding-bottom: 5px;
            margin-bottom: 3px;
        }
        
        .canhoto-title {
            font-size: 12px;
        }
        
        .canhoto-subtitle {
            font-size: 7px;
        }
        
        .info-section {
            font-size: 7px;
        }
        
        .section-title {
            font-size: 9px;
            margin: 5px 0 2px 0;
            padding: 2px 0;
        }
        
        .dados-horizontais th,
        .resumo-table th,
        .dados-horizontais td,
        .resumo-table td {
            padding: 2px;
            font-size: 8px;
        }
        
        .resumo-table td[colspan="3"] {
            font-size: 2px;
            padding: 1px;
        }
        
        .valor-total {
            font-size: 9px;
        }
        
        .declaracao {
            padding: 5px;
            font-size: 8px;
        }
        
        .assinatura-table td {
            padding: 2px;
            font-size: 8px;
        }
    }
    
    .canhoto-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 10px;
        background: var(--bg-card);
    }
    
    .canhoto-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 3px solid #10b981;
        padding-bottom: 10px;
        margin-bottom: 5px;
    }
    
    .logo-section img {
        max-height: 40px;
        width: auto;
    }
    
    .canhoto-title {
        font-size: 14px;
        font-weight: bold;
        color: var(--text-primary);
        margin: 0;
        text-align: center;
    }
    
    .canhoto-subtitle {
        font-size: 8px;
        color: var(--text-primary);
        margin: 2px 0 0 0;
        text-align: center;
    }
    
    .info-section {
        text-align: right;
        font-size: 8px;
        color: var(--text-primary);
    }
    
    .section-title {
        font-size: 10px;
        font-weight: bold;
        color: var(--text-primary);
        margin: 8px 0 3px 0;
        padding: 3px 0;
        border-bottom: 1px solid #333;
    }
    
    .dados-horizontais,
    .resumo-table,
    .assinatura-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 8px;
    }
    
    .dados-horizontais th,
    .resumo-table th {
        background: #d4edda;
        padding: 3px;
        text-align: left;
        font-weight: bold;
        border: 1px solid #333;
        font-size: 9px;
    }
    
    .dados-horizontais td,
    .resumo-table td {
        padding: 3px;
        border: 1px solid #333;
        vertical-align: top;
        font-size: 9px;
    }
    
    .resumo-table td[colspan="3"] {
        font-size: 3px;
        padding: 1px;
        text-align: center;
        font-weight: bold;
    }
    
    .valor {
        text-align: right;
        font-weight: 600;
    }
    
    .valor-total {
        text-align: right;
        font-weight: bold;
        font-size: 10px;
        color: #059669;
    }
    
    .declaracao {
        background: var(--bg-card);
        padding: 8px;
        border-radius: 4px;
        margin: 8px 0;
        border-left: 2px solid #3b82f6;
        font-size: 9px;
    }
    
    .assinatura-section {
        margin-top: 15px;
    }
    
    .assinatura-table td {
        padding: 3px;
        border: none;
        font-size: 9px;
    }
    
</style>
{% endblock %}

{% block content %}
<!-- Action Buttons -->
<div class="action-buttons">
    <a href="{% url 'rh:folha_detail' folha.id %}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i>Voltar aos Detalhes
    </a>
    <a href="{% url 'rh:folha_salarial' %}" class="btn btn-outline">
        <i class="fas fa-list"></i>Lista de Folhas
    </a>
    <a href="{% url 'dashboard' %}" class="btn btn-outline">
        <i class="fas fa-home"></i>Dashboard
    </a>
    <button onclick="window.print()" class="btn btn-primary">
        <i class="fas fa-print"></i>Imprimir
    </button>
</div>

<div class="canhoto-container">
    <!-- Cabe√ßalho -->
    <div class="canhoto-header">
        <div class="logo-section">
            <img src="{% static 'empresa/img/LOGO DA CONCEPTION.jpg' %}" alt="Logo Conception" class="logo">
        </div>
        <div class="title-section">
            <h1 class="canhoto-title">RECIBO DE SAL√ÅRIO</h1>
            <p class="canhoto-subtitle">M√™s de Refer√™ncia: {{ folha.mes_referencia|date:"F Y" }}</p>
        </div>
        <div class="info-section">
            <div>Recibo N¬∫: {{ folha.id }}</div>
            <div>Data: {% now "d/m/Y" %}</div>
        </div>
    </div>
    
    <!-- Dados do Trabalhador e Empregador (lado a lado) -->
    <h2 class="section-title">DADOS DO TRABALHADOR E EMPREGADOR</h2>
    <table class="dados-horizontais">
        <thead>
            <tr>
                <th>üßë‚Äçüíº TRABALHADOR</th>
                <th>üè¢ EMPREGADOR</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <strong>Nome:</strong> {{ funcionario_folha.funcionario.nome_completo }}<br>
                    <strong>C√≥digo:</strong> {{ funcionario_folha.funcionario.codigo_funcionario }}<br>
                    <strong>Cargo:</strong> {{ funcionario_folha.funcionario.cargo.nome|default:"N/A" }}<br>
                    <strong>Departamento:</strong> {{ funcionario_folha.funcionario.departamento.nome|default:"N/A" }}<br>
                    <strong>Sucursal:</strong> {{ funcionario_folha.funcionario.sucursal.nome|default:"N/A" }}<br>
                    <strong>Data Admiss√£o:</strong> {{ funcionario_folha.funcionario.data_admissao|date:"d/m/Y"|default:"N/A" }}
                </td>
                <td>
                    <strong>Nome da Empresa:</strong> {{ empresa.nome|default:"[Nome da Entidade Empregadora]" }}<br>
                    <strong>NUIT:</strong> {{ empresa.nuit|default:"[N√∫mero √önico de Identifica√ß√£o Tribut√°ria]" }}<br>
                    <strong>Endere√ßo:</strong> {{ empresa.endereco|default:"[Rua, Bairro, Cidade]" }}{% if empresa.bairro %}, {{ empresa.bairro }}{% endif %}{% if empresa.cidade %}, {{ empresa.cidade }}{% endif %}
                </td>
            </tr>
        </tbody>
    </table>
    
    <!-- Resumo Salarial -->
    <h2 class="section-title">üí∞ RESUMO SALARIAL</h2>
    
    
    <!-- Resumo Final Simplificado -->
    <h2 class="section-title">üíµ RESUMO FINAL</h2>
    
    
    
    <!-- Declara√ß√£o -->
    <div class="declaracao">
        <h2 class="section-title">üìù DECLARA√á√ÉO</h2>
        <p>Declaro ter recebido o valor l√≠quido de <strong>{{ funcionario_folha.salario_liquido|floatformat:2 }} MT</strong> 
        referente ao m√™s de <strong>{{ folha.mes_referencia|date:"F/Y" }}</strong>, conforme os termos legais vigentes.</p>
    </div>
    
    <!-- Assinatura -->
    <div class="assinatura-section">
        
    </div>
    
    <!-- Rodap√© -->
    <div style="text-align: center; margin-top: 30px; font-size: 12px; color: #6b7280;">
        Recibo gerado em: {% now "d/m/Y H:i" %}
    </div>
</div>
{% endblock %}
