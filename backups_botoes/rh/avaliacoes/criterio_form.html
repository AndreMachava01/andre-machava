{% extends "base_admin.html" %}


{% block title %}Adicionar Critério{% endblock %}

{% block content %}
<div class="container">
    <!-- Breadcrumb -->
    <nav class="breadcrumb-modern">
        <a href="/dashboard/">
            <i class="fas fa-home"></i>
            Dashboard
        </a>
        <i class="fas fa-chevron-right"></i>
        <a href="/rh/">RH</a>
        <i class="fas fa-chevron-right"></i>
        <a href="/rh/avaliacoes/">Avaliações</a>
        <i class="fas fa-chevron-right"></i>
        <a href="/rh/criterios/">Critérios</a>
        <i class="fas fa-chevron-right"></i>
        <span>{% if is_edit %}Editar{% else %}Adicionar{% endif %}</span>
    </nav>
    
    <!-- Page Header -->
    
{% include "includes/header.html" with
    title="{% if is_edit %}Editar{% else %}Adicionar{% endif %} Critério de Avaliação"
    subtitle="{% if is_edit %}
                        Edite as informações do critério de avaliação
                    {% else %}
                        Crie um novo critério para ser utilizado nas avaliações de desempenho
                    {% endif %}"
    icon="fas fa-{% if is_edit %}edit{% else %}plus-circle{% endif %}"
%}    </div>

    <!-- Formulário -->
    <div class="form-container">
        <form method="post" action="." method="post"action="."method="post"action="."method="post"action="."method="post"action="."method="post"action="."method="post">{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}
            {% csrf_token %}
            
            <div class="form-group">
                <label for="nome" class="form-label">
                    Nome do Critério <span class="required">*</span>
                </label>
                <input type="text" 
                       id="nome" 
                       name="nome" 
                       class="form-control" 
                       placeholder="Ex: Comunicação, Liderança, Produtividade..."
                       value="{% if criterio %}{{ criterio.nome }}{% endif %}"
                       required>
                <div class="help-text">
                    Nome descritivo do critério de avaliação
                </div>
            </div>

            <div class="form-group">
                <label for="descricao" class="form-label">
                    Descrição
                </label>
                <textarea id="descricao" 
                          name="descricao" 
                          class="form-control" 
                          rows="4"
                          placeholder="Descreva o que será avaliado neste critério...">{% if criterio %}{{ criterio.descricao }}{% endif %}</textarea>
                <div class="help-text">
                    Descrição detalhada do que será avaliado neste critério
                </div>
            </div>

            <div class="form-group">
                <label for="peso" class="form-label">
                    Peso <span class="required">*</span>
                </label>
                <input type="number" 
                       id="peso" 
                       name="peso" 
                       class="form-control" 
                       step="0.01" 
                       min="0.01" 
                       max="10.00" 
                       value="{% if criterio %}{{ criterio.peso }}{% else %}1.00{% endif %}"
                       placeholder="1.00"
                       required>
                <div class="help-text">
                    Peso do critério na avaliação (1.00 = peso padrão, valores maiores = mais importante)
                </div>
            </div>

            <div class="form-group">
                <div class="form-check">
                    <input type="checkbox" 
                           id="ativo" 
                           name="ativo" 
                           class="form-check-input" 
                           {% if not criterio or criterio.ativo %}checked{% endif %}>
                    <label for="ativo" class="form-check-label">
                        Critério ativo
                    </label>
                </div>
                <div class="help-text">
                    Critérios ativos aparecem nas opções de avaliação
                </div>
            </div>

            <div class="form-actions">
                <a href="#"rh:criterios' %}" class="btn btn btn btn btn btn btn-secondary btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive">
                    <i class="fas fa-times"></i>
                    Cancelar
                </a>
                <button type="submit" class="btn btn-primary" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação">
                    <i class="fas fa-save"></i>
                    {% if is_edit %}Atualizar{% else %}Salvar{% endif %} Critério
                </button>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Validação do formulário
    const form = document.querySelector('form');
    const nomeInput = document.getElementById('nome');
    const pesoInput = document.getElementById('peso');
    
    form.addEventListener('submit', function(e) {
        let isValid = true;
        
        // Limpar erros anteriores
        document.querySelectorAll('.form-error').forEach(error => error.remove());
        
        // Validar nome
        if (!nomeInput.value.trim()) {
            showError(nomeInput, 'Nome do critério é obrigatório');
            isValid = false;
        }
        
        // Validar peso
        const peso = parseFloat(pesoInput.value);
        if (isNaN(peso) || peso <= 0) {
            showError(pesoInput, 'Peso deve ser um número maior que zero');
            isValid = false;
        } else if (peso > 10) {
            showError(pesoInput, 'Peso não pode ser maior que 10');
            isValid = false;
        }
        
        if (!isValid) {
            e.preventDefault();
        }
    });
    
    function showError(input, message) {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'form-error';
        errorDiv.textContent = message;
        input.parentNode.appendChild(errorDiv);
        input.style.borderColor = '#dc2626';
    }
    
    // Limpar erro quando o usuário digitar
    [nomeInput, pesoInput].forEach(input => {
        input.addEventListener('input', function() {
            this.style.borderColor = '#d1d5db';
            const error = this.parentNode.querySelector('.form-error');
            if (error) {
                error.remove();
            }
        });
    });
});
</script>



{% endblock %}
