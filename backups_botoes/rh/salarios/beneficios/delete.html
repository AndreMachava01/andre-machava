{% extends "base_admin.html" %}
{% load static %}

{% block title %}Excluir Benefício{% endblock %}

{% block extra_style %}

{% endblock %}

{% block content %}
<div class="header-section">
    <h1 class="header-title">
        <i class="fas fa-exclamation-triangle"></i>
        Excluir Benefício
    </h1>
    
    <div style="margin-top: 15px;">
        <a href="#" class="back-btn -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive">
            <i class="fas fa-arrow-left"></i>
            Voltar para Benefícios
        </a>
    </div>
</div>

<div class="confirmation-container">
    <div class="warning-icon">
        <i class="fas fa-exclamation-triangle"></i>
    </div>
    
    <h2 class="confirmation-title">Confirmar Exclusão</h2>
    
    <p class="confirmation-message">
        Tem certeza que deseja excluir este benefício? Esta ação não pode ser desfeita.
    </p>
    
    <div class="beneficio-info">
        <div class="info-item">
            <span class="info-label">Nome:</span>
            <span class="info-value"><strong>{{ beneficio.nome }}</strong></span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Código:</span>
            <span class="info-value"><code>{{ beneficio.codigo }}</code></span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Tipo:</span>
            <span class="info-value">
                <span class="tipo-badge">{{ beneficio.get_tipo_display }}</span>
            </span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Valor Fixo:</span>
            <span class="info-value">
                {% if beneficio.valor_fixo %}
                    <span class="value-currency">{{ beneficio.valor_fixo }}</span>
                {% else %}
                    <span class="text-muted">-</span>
                {% endif %}
            </span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Percentual:</span>
            <span class="info-value">
                {% if beneficio.percentual %}
                    <span class="value-percent">{{ beneficio.percentual }}</span>
                {% else %}
                    <span class="text-muted">-</span>
                {% endif %}
            </span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Base de Cálculo:</span>
            <span class="info-value">
                {% if beneficio.base_calculo %}
                    {{ beneficio.base_calculo }}
                {% else %}
                    <span class="text-muted">-</span>
                {% endif %}
            </span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Status:</span>
            <span class="info-value">
                <span class="status-badge status-{% if beneficio.ativo %}ativo{% else %}inativo{% endif %}">
                    {% if beneficio.ativo %}Ativo{% else %}Inativo{% endif %}
                </span>
            </span>
        </div>
        
        {% if beneficio.observacoes %}
        <div class="info-item">
            <span class="info-label">Observações:</span>
            <span class="info-value">{{ beneficio.observacoes }}</span>
        </div>
        {% endif %}
        
        <div class="info-item">
            <span class="info-label">Criado em:</span>
            <span class="info-value">{{ beneficio.data_criacao|date:"d/m/Y H:i" }}</span>
        </div>
    </div>
    
    <div class="impact-warning">
        <h4><i class="fas fa-info-circle"></i> Impacto da Exclusão</h4>
        <p>Este benefício será removido permanentemente. Todos os salários que utilizam este benefício serão afetados. Esta ação pode impactar cálculos de folha de pagamento.</p>
    </div>
    
    <form method="post" class="form-actions"action="." method="post"action="."method="post"action="."method="post"action="."method="post"action="."method="post"action="."method="post">{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}
        {% csrf_token %}
        
        <a href="#"rh:beneficios_salariais' %}" class="btn btn btn btn btn btn btn-secondary btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive">
            <i class="fas fa-times"></i>
            Cancelar
        </a>
        
        <button type="button" class="btn btn btn btn btn btn btn btn-danger" onclick="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação"" tabindex="0" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação"" tabindex="0" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação"" tabindex="0" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação"" tabindex="0" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação"" tabindex="0" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação"" tabindex="0">
            <i class="fas fa-trash"></i>
            Excluir Benefício
        </button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Confirmação adicional ao clicar no botão de exclusão
    const deleteButton = document.querySelector('.btn-danger');
    
    deleteButton.addEventListener('click', function(e) {
        const beneficioNome = '{{ beneficio.nome }}';
        const beneficioCodigo = '{{ beneficio.codigo }}';
        const confirmMessage = `ATENÇÃO: Você está prestes a excluir permanentemente o benefício "${beneficioNome}" (${beneficioCodigo}).\n\nEsta ação NÃO PODE ser desfeita e pode afetar salários existentes.\n\nTem certeza absoluta?`;
        
        if (!confirm(confirmMessage)) {
            e.preventDefault();
        }
    });
});
</script>
{% endblock %}
