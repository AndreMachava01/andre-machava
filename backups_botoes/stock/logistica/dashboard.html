{% extends "base_admin.html" %}
{% load static %}

{% block title %}Dashboard Logística{% endblock %}

{% block extra_style %}

{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Header -->
    <div class="dashboard-header">
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <div>
                <h1 class="dashboard-title">
                    <i class="fas fa-truck"></i>
                    Dashboard Logística
                </h1>
                <p class="dashboard-subtitle">
                    Gestão de transporte, entregas e rastreamento de envios
                </p>
            </div>
            <div style="display: flex; gap: 15px; align-items: center; position: relative; z-index: 1000;">
                <a href="{% url "stock:logistica:main" %}" style="background: rgba(255, 255, 255, 0.2); color: white; border: 1px solid rgba(255, 255, 255, 0.3); padding: 12px 20px; border-radius: 10px; text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease; position: relative; z-index: 1001;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">
                    <i class="fas fa-arrow-left"></i>
                    Voltar ao Módulo
                </a>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="dashboard-content">
        <!-- Métricas Principais -->
        <div class="metrics-grid">
            <div class="metric-card purple">
                <div class="metric-header">
                    <span class="metric-title">Transportadoras Ativas</span>
                    <div class="metric-icon purple">
                        <i class="fas fa-truck"></i>
                    </div>
                </div>
                <div class="metric-value">{{ metricas.transportadoras_ativas }}</div>
                <p class="metric-description">Transportadoras operacionais</p>
            </div>

            <div class="metric-card warning">
                <div class="metric-header">
                    <span class="metric-title">Entregas em Andamento</span>
                    <div class="metric-icon warning">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                </div>
                <div class="metric-value">{{ metricas.entregas_em_andamento }}</div>
                <p class="metric-description">Em trânsito ou distribuição</p>
            </div>

            <div class="metric-card success">
                <div class="metric-header">
                    <span class="metric-title">Entregas Concluídas</span>
                    <div class="metric-icon success">
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
                <div class="metric-value">{{ metricas.entregas_concluidas }}</div>
                <p class="metric-description">Entregues com sucesso</p>
            </div>

            <div class="metric-card info">
                <div class="metric-header">
                    <span class="metric-title">Entregas Pendentes</span>
                    <div class="metric-icon info">
                        <i class="fas fa-clock"></i>
                    </div>
                </div>
                <div class="metric-value">{{ metricas.entregas_pendentes }}</div>
                <p class="metric-description">Aguardando preparação</p>
            </div>
        </div>

        <!-- Seções de Conteúdo -->
        <div class="content-sections">
            <!-- Escopo da Logística -->
            <div class="content-section">
                <h3 class="section-title">
                    <i class="fas fa-info-circle"></i>
                    Escopo da Logística
                </h3>
                
                <div class="alert info">
                    <div class="alert-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">Responsabilidades</div>
                        <p class="alert-message">
                            <strong>✅ Incluído:</strong><br>
                            • Gestão de transportadoras<br>
                            • Rastreamento de entregas<br>
                            • Controle de status<br>
                            • Eventos de rastreamento<br><br>
                            <strong>❌ Excluído:</strong><br>
                            • Transferências (Stock)<br>
                            • Compras (Stock)<br>
                            • Requisições (Stock)
                        </p>
                    </div>
                </div>
            </div>

            <!-- Alertas Logísticos -->
            <div class="content-section">
                <h3 class="section-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    Alertas Logísticos
                </h3>
                
                {% if alertas %}
                    {% for alerta in alertas %}
                    <div class="alert {{ alerta.tipo }}">
                        <div class="alert-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="alert-content">
                            <div class="alert-title">{{ alerta.tipo|title }}</div>
                            <p class="alert-message">{{ alerta.mensagem }}</p>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="alert info">
                        <div class="alert-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="alert-content">
                            <div class="alert-title">Sistema Operacional</div>
                            <p class="alert-message">Nenhum alerta logístico no momento</p>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Navegação -->
        <div class="nav-btns-container -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive" role="button" role="button" role="button" role="button" role="button">
            <h3 style="color: #f9fafb; margin-bottom: 25px; display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 1.3rem;">
                <i class="fas fa-compass" style="color: #8b5cf6;"></i>
                Navegação Rápida
            </h3>
            
            <div class="nav-btns-grid -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive" role="button" role="button" role="button" role="button" role="button">
                <a href="#"stock:logistica:rastreamento_list' %}" class="nav-btn -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive">
                    <i class="fas fa-search"></i>
                    <span>Rastreamentos</span>
                </a>
                
                <a href="#"stock:logistica:transportadoras_list' %}" class="nav-btn -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive">
                    <i class="fas fa-truck"></i>
                    <span>Transportadoras</span>
                </a>
                
                <!-- criação manual de rastreamento desativada -->
                
                <a href="#"stock:logistica:transportadora_create' %}" class="nav-btn -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive">
                    <i class="fas fa-building"></i>
                    <span>Nova Transportadora</span>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
