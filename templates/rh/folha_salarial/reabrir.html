{% extends "base_admin.html" %}
{% load static %}

{% block title %}Reabrir Folha - {{ folha.mes_referencia|date:"F Y" }}{% endblock %}

{% block extra_style %}

{% endblock %}

{% block content %}
<div class="reopen-container">
    <div class="reopen-header">
        <h1><i class="fas fa-unlock"></i> Reabrir Folha Salarial</h1>
        <p>Folha de {{ folha.mes_referencia|date:"F Y" }} - Status: {{ folha.get_status_display }}</p>
    </div>
    
    <!-- Aviso -->
    <div class="warning-box">
        <h4>
            <i class="fas fa-exclamation-triangle"></i>
            Atenção!
        </h4>
        <p>
            Reabrir uma folha fechada permitirá que os dados sejam editados novamente. 
            Esta ação deve ser realizada apenas em casos excepcionais e com justificativa adequada.
        </p>
    </div>
    
    <!-- Informações da Folha -->
    <div class="folha-info">
        <h4><i class="fas fa-info-circle"></i> Informações da Folha</h4>
        <div class="info-grid">
            <div class="info-item">
                <div class="label">Mês</div>
                <div class="value">{{ folha.mes_referencia|date:"F Y" }}</div>
            </div>
            <div class="info-item">
                <div class="label">Status</div>
                <div class="value">{{ folha.get_status_display }}</div>
            </div>
            <div class="info-item">
                <div class="label">Data Fechamento</div>
                <div class="value">{{ folha.data_fechamento|date:"d/m/Y"|default:"N/A" }}</div>
            </div>
            <div class="info-item">
                <div class="label">Total Líquido</div>
                <div class="value">{{ folha.total|default:0_liquido|floatformat:2 }} MT</div>
            </div>
        </div>
    </div>
    
    <!-- Formulário -->
    <div class="reopen-form">
        <form method="post" action="." method="post"action="."method="post"action="."method="post"action="."method="post"action="."method="post"action="."method="post"action="."method="post">{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}{% csrf_token %}
            {% csrf_token %}
            
            <div class="form-group">
                <label for="motivo">
                    <i class="fas fa-edit"></i>
                    Motivo da Reabertura *
                </label>
                <textarea 
                    id="motivo" 
                    name="motivo" 
                    placeholder="Descreva o motivo da reabertura da folha..."
                    required
                ></textarea>
                <div class="help-text">
                    Explique detalhadamente por que a folha precisa ser reaberta. 
                    Esta informação será registrada no histórico da folha.
                </div>
            </div>
            
            <div class="action-btns -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive" role="button" role="button" role="button" role="button" role="button" role="button">
                <button type="submit" class="btn btn-primary" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação" class="btn btn btn-primary btn-responsive btn-responsive" id="btn-{{ forloop.counter|default:"1" }}" aria-label="Botão de ação" title="Clique para executar ação" title="Clique para executar ação">
                    <i class="fas fa-unlock"></i>
                    Confirmar Reabertura
                </button>
                
                <a href="#"rh:folha_detail' folha.id %}" class="btn-cancelar btn-responsive -responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive btn-responsive">
                    <i class="fas fa-times"></i>
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
