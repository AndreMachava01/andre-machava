{% extends "base_admin.html" %}
{% load static %}

{% block title %}Remover Inscrição{% endblock %}

{% block extra_style %}
<style>
    /* Estilos específicos do módulo - apenas gradiente no header */
    .page-header,
    .hero-section,
    .dashboard-header,
    .nav-top {
        background: var(--purple-gradient);
    }
</style>
{% endblock %}

{% block content %}
<div class="delete-container">
    <!-- Header -->
    <div class="header-section">
        <div>
            <a href="{% url 'rh:treinamento_inscricoes' inscricao.treinamento.id %}" class="back-button">
                <i class="fas fa-arrow-left"></i>
                Voltar às Inscrições
            </a>
            <h1 class="header-title">
                <i class="fas fa-exclamation-triangle"></i>
                Remover Inscrição
            </h1>
        </div>
    </div>

    <!-- Aviso de Perigo -->
    <div class="warning-section">
        <div class="warning-icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="warning-title">Atenção! Esta ação não pode ser desfeita</div>
        <div class="warning-text">
            Você está prestes a remover permanentemente a inscrição de <strong>{{ inscricao.funcionario.nome_completo }}</strong> 
            no treinamento <strong>"{{ inscricao.treinamento.nome }}"</strong>. 
            Esta ação irá remover todos os dados relacionados, incluindo avaliações e histórico.
        </div>
    </div>

    <!-- Informações da Inscrição -->
    <div class="inscricao-info">
        <h3 class="info-title">
            <i class="fas fa-user-graduate"></i>
            Informações da Inscrição
        </h3>
        
        <div class="participant-header">
            <div class="participant-avatar">
                {{ inscricao.funcionario.nome_completo|first|upper }}
            </div>
            <div class="participant-details">
                <h3>{{ inscricao.funcionario.nome_completo }}</h3>
                <p><strong>Cargo:</strong> {{ inscricao.funcionario.cargo.nome }}</p>
                <p><strong>Departamento:</strong> {{ inscricao.funcionario.cargo.departamento.nome }}</p>
            </div>
        </div>
        
        <div class="info-item">
            <span class="info-label">Treinamento</span>
            <span class="info-value">{{ inscricao.treinamento.nome }}</span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Status</span>
            <span class="info-value">
                <span class="badge status-{{ inscricao.status|lower }}">
                    {{ inscricao.get_status_display }}
                </span>
            </span>
        </div>
        
        <div class="info-item">
            <span class="info-label">Data de Inscrição</span>
            <span class="info-value">{{ inscricao.data_inscricao|date:"d/m/Y H:i" }}</span>
        </div>
        
        {% if inscricao.nota_final %}
        <div class="info-item">
            <span class="info-label">Nota Final</span>
            <span class="info-value">{{ inscricao.nota_final|floatformat:1 }}/10</span>
        </div>
        {% endif %}
        
        {% if inscricao.frequencia_percentual %}
        <div class="info-item">
            <span class="info-label">Frequência</span>
            <span class="info-value">{{ inscricao.frequencia_percentual|floatformat:1 }}%</span>
        </div>
        {% endif %}
        
        <div class="info-item">
            <span class="info-label">Aprovado</span>
            <span class="info-value">
                {% if inscricao.aprovado %}
                    <i class="fas fa-check-circle" style="color: #10b981;"></i> Sim
                {% else %}
                    <i class="fas fa-times-circle" style="color: #ef4444;"></i> Não
                {% endif %}
            </span>
        </div>
    </div>

    <!-- Consequências -->
    <div class="consequences">
        <div class="consequences-title">
            <i class="fas fa-list"></i>
            O que será removido:
        </div>
        <ul class="consequences-list">
            <li>
                <i class="fas fa-check"></i>
                Inscrição do funcionário no treinamento
            </li>
            {% if inscricao.nota_final or inscricao.frequencia_percentual %}
            <li>
                <i class="fas fa-check"></i>
                Avaliação e notas do participante
            </li>
            {% endif %}
            <li>
                <i class="fas fa-check"></i>
                Histórico de presença e frequência
            </li>
            <li>
                <i class="fas fa-check"></i>
                Observações e comentários
            </li>
            <li>
                <i class="fas fa-check"></i>
                Dados de aprovação e certificação
            </li>
        </ul>
    </div>

    <!-- Ações -->
    <div class="form-actions">
        <a href="{% url 'rh:treinamento_inscricoes' inscricao.treinamento.id %}" class="btn btn-secondary">
            <i class="fas fa-times"></i>
            Cancelar
        </a>
        <form method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja remover esta inscrição? Esta ação não pode ser desfeita!')">
                <i class="fas fa-trash"></i>
                Sim, Remover Inscrição
            </button>
        </form>
    </div>
</div>
{% endblock %}
